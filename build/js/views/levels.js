define(["lodash","backbone","js/views/base","game","js/models/LevelsCollection","text!html/levels.html"],function(e,t,l,n,a,i){var o;return o=l.extend({template:e.template(i),tagName:"div",name:"levels",events:{"click .level-button.button":"onLevelButtonClick"},initialize:function(){l.prototype.initialize.apply(this,arguments),this.model=new a},prepareData:function(){var e=this;return n.db.getAllLevels().then(function(t){e.model.addLevels(t)})},remove:function(){this.model.unload(),l.prototype.remove.apply(this,arguments)},getTemplateData:function(){return{levels:this.model.getJSONLevels()}},onLevelButtonClick:function(t){var l=t.target.dataset.levelNum,a=parseInt(l,10);e.isNumber(a)&&n.navigateToLevel(a)}})});